<header>
  <h2>{{ sectionName }}</h2>
  <div class="actions">
    <i
      nz-tooltip nzTooltipTitle="add a group" nzTooltipPlacement="bottom"
      nz-icon nzType="plus" nzTheme="outline" (click)="addGroup()"></i>
    <i
      *ngIf="store.isClipboardActionsAvailable"
      nz-icon nzType="snippets" nzTheme="outline"
      nz-tooltip nzTooltipTitle="past a group" nzTooltipPlacement="bottom"
      (click)="contentManager.clipboard.pastGroup()"></i>
  </div>
</header>

<div *ngIf="!contentManager.isLoading">
  <div *ngFor="let group of groupList">
    <div [id]="group.anchorLink" class="group">
  
      <app-group-header
        [group]="group"
        [contentManager]="contentManager"
      ></app-group-header>
  
      <div class="container" [ngClass]="layout">
        <div *ngFor="let token of group.tokens" class="token-wrapper">
          <div
            class="token"
            (click)="isTokenEditable && openEditor(token, group)"
          >
            <ng-container *ngTemplateOutlet="
              tokenTemplate;
              context: {$implicit: token, group: group}"
            ></ng-container>
  
            <div class="dropdown-menu">
              <i
                nz-icon nzType="more" nzTheme="outline"
                nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu"
              >
                <nz-dropdown-menu #menu="nzDropdownMenu">
                  <ul nz-menu>
                    <li
                      nz-menu-item
                      (click)="editableText.makeEditable()"
                    >Rename</li>
                    <li
                      nz-menu-item
                      (click)="contentManager.deleteToken(token.id, group.id)"
                    >Delete</li>
                    <li
                      *ngIf="store.isClipboardActionsAvailable"
                      nz-menu-item
                      (click)="contentManager.clipboard.copy(token)"
                    >Copy</li>
                  </ul>
                </nz-dropdown-menu>
              </i>
            </div>
          </div>

          <app-editable-text
            #editableText
            [text]="token.name"
            (blur)="contentManager.renameToken($event, token.id, group.id)"
            [customTemplate]="textTemplate"
          >
            <ng-template #textTemplate let-text>
              <p class="token-name">{{ text }}</p>
            </ng-template>
          </app-editable-text>
  
        </div>
      </div>
  
      <div class="add-token-btn" (click)="addToken(group.id)">
        <i nz-icon nzType="plus" nzTheme="outline"></i>
      </div>
    </div>
  </div>

</div>

<div *ngIf="contentManager.isLoading">Loading</div>