<app-group-list
  [groupTemplate]="groupTemplate"
  [sectionTreeTemplate]="sectionTreeTemplate"
></app-group-list>

<!-- group -->

<ng-template #groupTemplate let-group>
  <div class="group">

    <app-group-header
      [group]="group"
      [customButtonsTemplate]="customButtonsTemplate"
    ></app-group-header>

    <ng-template #customButtonsTemplate>
      <i (click)="toggleViewOptions()" class="icon-btn" nz-icon nzType="eye" nzTheme="outline"></i>
    </ng-template>

    <ng-container *ngIf="isViewOptionsOpen">
      <app-group-view-list
        [options]="viewOptions"
        [group]="group"
      ></app-group-view-list>
      <div class="divider"></div>
    </ng-container>

    <ng-container [ngSwitch]="group.view">
      <app-color-palette-view-default
        *ngSwitchCase="'default'"
        [group]="group"
        class="tokens-view-grid"
      ></app-color-palette-view-default>

      <app-color-palette-view-grouped
        *ngSwitchCase="'grouped'"
        [group]="group"
        class="tokens-view-grid"
      ></app-color-palette-view-grouped>
  
      <app-color-palette-view-inline
        *ngSwitchCase="'inline'"
        [group]="group"
        class="align-center"
      ></app-color-palette-view-inline>
    </ng-container>

  </div>
</ng-template>


<!-- tree -->
<ng-template #sectionTreeTemplate let-groups>
  <app-section-tree [groups]="groups" [leafTemplate]="leafTemplate">
    <ng-template #leafTemplate let-token let-leafDefaultTemplate="leafDefaultTemplate">

      <ng-container *ngFor="let tints of token.tint.reverse()">
        <ng-container *ngTemplateOutlet="leafDefaultTemplate; context: {$implicit: tints}"></ng-container>
      </ng-container>

      <ng-container *ngTemplateOutlet="leafDefaultTemplate; context: {$implicit: token}"></ng-container>

      <ng-container *ngFor="let shades of token.shade">
        <ng-container *ngTemplateOutlet="leafDefaultTemplate; context: {$implicit: shades}"></ng-container>
      </ng-container>
    </ng-template>
  </app-section-tree>
</ng-template>